"0","library(sf)"
"2","Linking to GEOS 3.9.3, GDAL 3.5.2, PROJ 8.2.1; sf_use_s2() is TRUE
"
"0","world_sf <- sf::st_as_sf(rworldmap::getMap(resolution = ""low""))"
"0",""
"0","## world in long-lat"
"0","crs_longlat <- ""+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"""
"0",""
"0","p_longlat <- ggplot(world_sf) + "
"0","  geom_sf(fill = ""#E69F00B0"", color = ""black"", size = 0.5/.pt) + "
"0","  coord_sf(expand = FALSE, crs = crs_longlat) + "
"0","  scale_x_continuous("
"0","    name = ""longitude"","
"0","    breaks = seq(-160, 160, by = 20),"
"0","    labels = parse(text = c(""NA"", ""NA"", ""120*degree*W"", ""NA"", ""NA"", ""60*degree*W"", ""NA"", ""NA"", ""0*degree"", ""NA"", ""NA"", ""60*degree*E"", ""NA"", ""NA"", ""120*degree*E"", ""NA"", ""NA""))"
"0","  ) +"
"0","  scale_y_continuous("
"0","    name = ""latitude"","
"0","    breaks = seq(-80, 80, by = 20),"
"0","    labels = parse(text = c(""80*degree*S"", ""NA"", ""40*degree*S"", ""NA"", ""0*degree"", ""NA"", ""40*degree*N"", ""NA"", ""80*degree*N""))"
"0","  ) +"
"0","  theme_dviz_grid(12) +"
"0","  theme("
"0","    panel.background = element_rect(fill = ""#56B4E950"", color = ""grey30"", size = 0.5),"
"0","    panel.grid.major = element_line(color = ""gray30"", size = 0.25),"
"0","    axis.ticks = element_line(color = ""gray30"", size = 0.5/.pt),"
"0","    plot.margin = margin(5, 10, 1.5, 1.5)"
"0","  )"
"2","Warning: The `size` argument of `element_line()` is deprecated as of ggplot2 3.4.0.
Please use the `linewidth` argument instead."
"2","Warning: The `size` argument of `element_rect()` is deprecated as of ggplot2 3.4.0.
Please use the `linewidth` argument instead."
"0","## Interrupted Goode homolosine"
"0","crs_goode <- ""+proj=igh"""
"0",""
"0","# projection outline in long-lat coordinates"
"0","lats <- c("
"0","  90:-90, # right side down"
"0","  -90:0, 0:-90, # third cut bottom"
"0","  -90:0, 0:-90, # second cut bottom"
"0","  -90:0, 0:-90, # first cut bottom"
"0","  -90:90, # left side up"
"0","  90:0, 0:90, # cut top"
"0","  90 # close"
"0",")"
"0","longs <- c("
"0","  rep(180, 181), # right side down"
"0","  rep(c(80.01, 79.99), each = 91), # third cut bottom"
"0","  rep(c(-19.99, -20.01), each = 91), # second cut bottom"
"0","  rep(c(-99.99, -100.01), each = 91), # first cut bottom"
"0","  rep(-180, 181), # left side up"
"0","  rep(c(-40.01, -39.99), each = 91), # cut top"
"0","  180 # close"
"0",")"
"0",""
"0","goode_outline <- "
"0","  list(cbind(longs, lats)) %>%"
"0","  st_polygon() %>%"
"0","  st_sfc("
"0","    crs = ""+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"""
"0","  ) %>% "
"0","  st_transform(crs = crs_goode)"
"0",""
"0","# bounding box in transformed coordinates"
"0","xlim_goode <- c(-21945470, 21963330)"
"0","ylim_goode <- c(-9538022, 9266738)"
"0","goode_bbox <- "
"0","  list("
"0","    cbind("
"0","      c(xlim_goode[1], xlim_goode[2], xlim_goode[2], xlim_goode[1], xlim_goode[1]), "
"0","      c(ylim_goode[1], ylim_goode[1], ylim_goode[2], ylim_goode[2], ylim_goode[1])"
"0","    )"
"0","  ) %>%"
"0","  st_polygon() %>%"
"0","  st_sfc(crs = crs_goode)"
"0",""
"0","# area outside the earth outline"
"0","goode_without <- st_difference(goode_bbox, goode_outline)"
"0",""
"0","p_goode <- ggplot(world_sf) + "
"0","  geom_sf(fill = ""#E69F00B0"", color = ""black"", size = 0.5/.pt) +"
"0","  geom_sf(data = goode_without, fill = ""white"", color = NA) +"
"0","  geom_sf(data = goode_outline, fill = NA, color = ""grey30"", size = 0.5/.pt) +"
"0","  scale_x_continuous("
"0","    name = NULL,"
"0","    breaks = seq(-160, 160, by = 20)"
"0","  ) +"
"0","  scale_y_continuous("
"0","    name = NULL,"
"0","    breaks = seq(-80, 80, by = 20)"
"0","  ) + "
"0","  coord_sf(xlim = 0.95*xlim_goode, ylim = 0.95*ylim_goode, expand = FALSE, crs = crs_goode, ndiscr = 1000) + "
"0","  theme_dviz_grid(12, rel_small = 1) +"
"0","  theme("
"0","    panel.background = element_rect(fill = ""#56B4E950"", color = ""white"", size = 1),"
"0","    panel.grid.major = element_line(color = ""gray30"", size = 0.25),"
"0","    plot.margin = margin(1.5, 1.5, 24, 1.5)"
"0","  )"
"0",""
"0",""
"0","## Robinson projection"
"0","crs_robin <- ""+proj=robin +lat_0=0 +lon_0=0 +x0=0 +y0=0"""
"0",""
"0","# projection outline in long-lat coordinates"
"0","lats <- c(90:-90, -90:90, 90)"
"0","longs <- c(rep(c(180, -180), each = 181), 180)"
"0",""
"0","robin_outline <- "
"0","  list(cbind(longs, lats)) %>%"
"0","  st_polygon() %>%"
"0","  st_sfc("
"0","    crs = ""+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"""
"0","  ) %>% "
"0","  st_transform(crs = crs_robin)"
"0",""
"0","# bounding box in transformed coordinates"
"0","xlim_robin <- c(-18494733, 18613795)"
"0","ylim_robin <- c(-9473396, 9188587)"
"0","robin_bbox <- "
"0","  list("
"0","    cbind("
"0","      c(xlim_robin[1], xlim_robin[2], xlim_robin[2], xlim_robin[1], xlim_robin[1]), "
"0","      c(ylim_robin[1], ylim_robin[1], ylim_robin[2], ylim_robin[2], ylim_robin[1])"
"0","    )"
"0","  ) %>%"
"0","  st_polygon() %>%"
"0","  st_sfc(crs = crs_robin)"
"0",""
"0","# area outside the earth outline"
"0","robin_without <- st_difference(robin_bbox, robin_outline)"
"0",""
"0","p_robin <- ggplot(world_sf) + "
"0","  geom_sf(fill = ""#E69F00B0"", color = ""black"", size = 0.5/.pt) + "
"0","  geom_sf(data = robin_without, fill = ""white"", color = NA) +"
"0","  geom_sf(data = robin_outline, fill = NA, color = ""grey30"", size = 0.5/.pt) +"
"0","  scale_x_continuous("
"0","    name = NULL,"
"0","    breaks = seq(-160, 160, by = 20)"
"0","  ) +"
"0","  scale_y_continuous("
"0","    name = NULL,"
"0","    breaks = seq(-80, 80, by = 20)"
"0","  ) +"
"0","  coord_sf(xlim = 0.95*xlim_robin, ylim = 0.95*ylim_robin, expand = FALSE, crs = crs_robin, ndiscr = 1000) + "
"0","  theme_dviz_grid(12, rel_small = 1) +"
"0","  theme("
"0","    panel.background = element_rect(fill = ""#56B4E950"", color = ""white"", size = 1),"
"0","    panel.grid.major = element_line(color = ""gray30"", size = 0.25),"
"0","    plot.margin = margin(6, 1.5, 1.5, 1.5)"
"0","  )"
"0",""
"0",""
"0","## Winkel tripel"
"0","# The Winkel tripel projection needs to be done manually, it is not supported by sf."
"0","crs_wintri <- ""+proj=wintri +datum=WGS84 +no_defs +over"""
"0",""
"0","# world"
"0","world_wintri <- lwgeom::st_transform_proj(world_sf, crs = crs_wintri)"
"0",""
"0","# graticule"
"0","grat_wintri <- sf::st_graticule(lat = c(-89.9, seq(-80, 80, 20), 89.9))"
"0","grat_wintri <- lwgeom::st_transform_proj(grat_wintri, crs = crs_wintri)"
"0",""
"0","# earth outline"
"0","lats <- c(90:-90, -90:90, 90)"
"0","longs <- c(rep(c(180, -180), each = 181), 180)"
"0","wintri_outline <- "
"0","  list(cbind(longs, lats)) %>%"
"0","  st_polygon() %>%"
"0","  st_sfc("
"0","    crs = ""+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"""
"0","  ) %>% "
"0","  lwgeom::st_transform_proj(crs = crs_wintri)"
"0",""
"0","p_wintri <- ggplot() + "
"0","  geom_sf(data = wintri_outline, fill = ""#56B4E950"", color = NA) +"
"0","  geom_sf(data = grat_wintri, color = ""gray30"", size = 0.25/.pt) + "
"0","  geom_sf(data = world_wintri, fill = ""#E69F00B0"", color = ""black"", size = 0.5/.pt) + "
"0","  geom_sf(data = wintri_outline, fill = NA, color = ""grey30"", size = 0.5/.pt) +"
"0","  coord_sf(datum = NA, expand = FALSE) +"
"0","  theme_dviz_grid(12, rel_small = 1) +"
"0","  theme("
"0","    plot.margin = margin(6, 1.5, 3, 1.5)"
"0","  )"
"0",""
"0","p <- plot_grid("
"0","  p_longlat, p_goode, p_robin, p_wintri,"
"0","  labels = c("
"0","    ""Cartesian longitude and latitude"", ""Interrupted Goode homolosine"", "
"0","    ""Robinson"", ""Winkel tripel"""
"0","  )"
"0",")"
"0",""
"0","p + theme(plot.margin = margin(1.5, 0, 0, 0))"
